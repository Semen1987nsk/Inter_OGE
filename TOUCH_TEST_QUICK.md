# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç Touch –Ω–∞ –ø–∞–Ω–µ–ª–∏

## –®–∞–≥ 1: –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –∫–∞—Å–∞–Ω–∏–π
```
http://localhost:8000/touch-test.html
```

–û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É –Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏ –∏:
1. **–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –≥—Ä—É–∑—ã** –ø–∞–ª—å—Ü–µ–º
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É** –≤–≤–µ—Ä—Ö—É:
   - Touch Starts = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Å–∞–Ω–∏–π ‚úÖ
   - Touch Moves = –¥–≤–∏–∂–µ–Ω–∏—è –ø–∞–ª—å—Ü–µ–º ‚úÖ
   - Touch Ends = –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è ‚úÖ
   - Touch Cancels = –û–¢–ú–ï–ù–´ ‚ùå (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0!)

### ‚ùå –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ Touch Cancels:
- –ë—Ä–∞—É–∑–µ—Ä –æ—Ç–º–µ–Ω—è–µ—Ç —Å–æ–±—ã—Ç–∏—è (–ø—Ä–æ–∫—Ä—É—Ç–∫–∞/–∑—É–º)
- CSS `touch-action: none` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ù—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### ‚úÖ –ï—Å–ª–∏ Touch Cancels = 0:
- Touch —Å–æ–±—ã—Ç–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ!
- –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ –®–∞–≥—É 2

---

## –®–∞–≥ 2: –ü–æ–ª–Ω—ã–π —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç —Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π
```
http://localhost:8000/experiments/kit2/experiment-1-spring.html
```

–ù–∞ —Ç–∞—á-–ø–∞–Ω–µ–ª–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ **–≤–∫–ª—é—á–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É.

### –ß—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å:
1. **–ü—Ä–∞–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª** - –æ–≤–µ—Ä–ª–µ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
2. **–ê–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Å–∞–Ω–∏—è** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–ª—å—Ü–µ–≤ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
3. **–ò—Å—Ç–æ—Ä–∏—è —Å–æ–±—ã—Ç–∏–π** - —Ü–≤–µ—Ç–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ —Å —Å–æ–±—ã—Ç–∏—è–º–∏

### –ü–æ–ø—Ä–æ–±—É–π—Ç–µ:
1. –ö–æ—Å–Ω–∏—Ç–µ—Å—å **–≥—Ä—É–∑–∞ 100–≥**
2. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –Ω–∞ **–ø—Ä—É–∂–∏–Ω—É**
3. –û—Ç–ø—É—Å—Ç–∏—Ç–µ

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ:
```
‚ñ∂ touchstart @ (X, Y) [1 –∫–∞—Å–∞–Ω–∏–µ]
‚Üí touchmove @ (X, Y) [1 –∫–∞—Å–∞–Ω–∏–µ]
‚Üí touchmove @ (X, Y) [1 –∫–∞—Å–∞–Ω–∏–µ]
...
‚ñ† touchend @ (X, Y) [0 –∫–∞—Å–∞–Ω–∏–π]
```

### ‚ùå –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:
```
‚ñ∂ touchstart
‚Üí touchmove
‚ö†Ô∏è touchcancel - –ö–ê–°–ê–ù–ò–ï –û–¢–ú–ï–ù–ï–ù–û!
```
–ó–Ω–∞—á–∏—Ç –±—Ä–∞—É–∑–µ—Ä –æ—Ç–º–µ–Ω—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ! –°–º–æ—Ç—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "–ü—Ä–æ–±–ª–µ–º—ã" –Ω–∏–∂–µ.

---

## –®–∞–≥ 3: –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
```javascript
// –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
‚úÖ Touch diagnostics enabled
‚úÖ Spring drag enabled (with touch support)
üì± Touch device detected!

// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫—É:
console.log('Touch:', 'ontouchstart' in window);
console.log('Max points:', navigator.maxTouchPoints);
```

---

## üîß –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ì—Ä—É–∑—ã "—Å–æ—Å–∫–∞–∫–∏–≤–∞—é—Ç" –æ–±—Ä–∞—Ç–Ω–æ
**–ü—Ä–∏—á–∏–Ω–∞:** `touchcancel` –æ—Ç–º–µ–Ω—è–µ—Ç –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CSS –ø—Ä–∏–º–µ–Ω–∏–ª—Å—è:
   ```javascript
   const overlay = document.getElementById('drag-drop-overlay');
   console.log(getComputedStyle(overlay).touchAction); // –î–æ–ª–∂–Ω–æ –±—ã—Ç—å "none"
   ```

2. –ï—Å–ª–∏ –Ω–µ "none" - CSS –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–ª—Å—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - –ö—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+R)
   - –ü—É—Ç—å –∫ CSS —Ñ–∞–π–ª—É
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å—Ç–∏–ª–µ–π (inspect element)

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –°–æ–±—ã—Ç–∏—è –Ω–µ –¥–æ—Ö–æ–¥—è—Ç
**–ü—Ä–∏—á–∏–Ω–∞:** –î—Ä—É–≥–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç —Å–æ–±—ã—Ç–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ z-index:
const overlay = document.getElementById('drag-drop-overlay');
console.log(getComputedStyle(overlay).zIndex); // –î–æ–ª–∂–Ω–æ –±—ã—Ç—å "5"
console.log(getComputedStyle(overlay).pointerEvents); // –î–æ–ª–∂–Ω–æ –±—ã—Ç—å "auto"
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –î–≤–æ–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (mouse + touch)
**–ü—Ä–∏—á–∏–Ω–∞:** –ë—Ä–∞—É–∑–µ—Ä —ç–º—É–ª–∏—Ä—É–µ—Ç mouse –ø–æ—Å–ª–µ touch

**–†–µ—à–µ–Ω–∏–µ:** –£–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ `e.preventDefault()` –≤ `touchstart`

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞:
1. –ö–∞—Å–∞–µ—Ç–µ—Å—å –≥—Ä—É–∑–∞ ‚Üí `touchstart` ‚Üí –≥—Ä—É–∑ "–ø—Ä–∏–ª–∏–ø–∞–µ—Ç" –∫ –ø–∞–ª—å—Ü—É
2. –î–≤–∏–≥–∞–µ—Ç–µ –ø–∞–ª—å—Ü–µ–º ‚Üí –º–Ω–æ–≥–æ `touchmove` ‚Üí –≥—Ä—É–∑ —Å–ª–µ–¥—É–µ—Ç –∑–∞ –ø–∞–ª—å—Ü–µ–º
3. –û—Ç–ø—É—Å–∫–∞–µ—Ç–µ ‚Üí `touchend` ‚Üí –≥—Ä—É–∑ –æ—Å—Ç–∞—ë—Ç—Å—è –∏–ª–∏ –ø–æ–¥–≤–µ—à–∏–≤–∞–µ—Ç—Å—è
4. **–ù–µ—Ç `touchcancel`!**

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞:
1. –ö–∞—Å–∞–µ—Ç–µ—Å—å –≥—Ä—É–∑–∞ ‚Üí `touchstart`
2. –ù–∞—á–∏–Ω–∞–µ—Ç–µ —Ç–∞—â–∏—Ç—å ‚Üí 2-3 `touchmove`
3. –ü–æ—è–≤–ª—è–µ—Ç—Å—è `touchcancel` ‚ö†Ô∏è
4. –ì—Ä—É–∑ "—Å–æ—Å–∫–∞–∫–∏–≤–∞–µ—Ç" –æ–±—Ä–∞—Ç–Ω–æ
5. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç—Å—è –∏–ª–∏ –∑—É–º–∏—Ä—É–µ—Ç—Å—è

---

## üéØ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
```javascript
// –í–∫–ª—é—á–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –≤—Ä—É—á–Ω—É—é
window.touchDiag.enable()

// –í—ã–∫–ª—é—á–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
window.touchDiag.disable()

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞
window.experiment.state

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CSS
const overlay = document.getElementById('drag-drop-overlay');
console.log({
  touchAction: getComputedStyle(overlay).touchAction,
  zIndex: getComputedStyle(overlay).zIndex,
  pointerEvents: getComputedStyle(overlay).pointerEvents,
  userSelect: getComputedStyle(overlay).userSelect
});

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É touch
console.log({
  hasTouch: 'ontouchstart' in window,
  maxTouchPoints: navigator.maxTouchPoints,
  hasPointer: 'onpointerdown' in window
});
```

---

## üìù –û—Ç—á—ë—Ç –æ –ø—Ä–æ–±–ª–µ–º–µ

–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ, —Å–æ–±–µ—Ä–∏—Ç–µ –æ—Ç—á—ë—Ç:

### 1. –°–∫—Ä–∏–Ω—à–æ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ (–ø—Ä–∞–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª)
### 2. –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (–≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
### 3. –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:
- –ú–æ–¥–µ–ª—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏?
- –ë—Ä–∞—É–∑–µ—Ä –∏ –≤–µ—Ä—Å–∏—è?
- –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∫–∞—Å–∞–Ω–∏–∏?
- –ï—Å—Ç—å –ª–∏ `touchcancel` –≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ?
- –ó–Ω–∞—á–µ–Ω–∏—è CSS —Å–≤–æ–π—Å—Ç–≤ (—Å–º. –∫–æ–º–∞–Ω–¥—ã –≤—ã—à–µ)

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

1. ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `getEventCoords()`
2. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ `touchstart/move/end/cancel`
3. ‚úÖ `e.preventDefault()` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
4. ‚úÖ CSS `touch-action: none`
5. ‚úÖ CSS `user-select: none`
6. ‚úÖ `{ passive: false }` –¥–ª—è touchmove
7. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–∞ —Ç–∞—á-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
8. ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

–¢–µ–ø–µ—Ä—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –ø–∞–Ω–µ–ª–∏! üöÄ
