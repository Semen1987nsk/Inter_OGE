# ‚úÖ –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–Å–¢ - –í–°–ï –û–®–ò–ë–ö–ò –ù–ê–ô–î–ï–ù–´ –ò –ò–°–ü–†–ê–í–õ–ï–ù–´

**–î–∞—Ç–∞:** 2024
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∫–Ω–æ–ø–æ–∫ "–£–±—Ä–∞—Ç—å" –∏ "–í–µ—Ä–Ω—É—Ç—å –≤ –∫–æ–º–ø–ª–µ–∫—Ç" –¥–ª—è –≥—Ä—É–∑–æ–≤ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö  
**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –±–∞–≥:** –®—Ç–∞–Ω–≥–∞ —Å –¥–∏—Å–∫–∞–º–∏ –Ω–∞ –¥–∏–Ω–∞–º–æ–º–µ—Ç—Ä–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫—É" –≤–º–µ—Å—Ç–æ "–°–Ω—è—Ç—å"

---

## üêõ –ù–ê–ô–î–ï–ù–ù–´–ï –ë–ê–ì–ò (4 —à—Ç—É–∫–∏)

### –ë–ê–ì #1: –î–∏—Å–∫–∏ –Ω–∞ –ø–æ–¥–≤–µ—à–µ–Ω–Ω–æ–π —à—Ç–∞–Ω–≥–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∫–Ω–æ–ø–∫—É
**–°–∏–º–ø—Ç–æ–º:** –®—Ç–∞–Ω–≥–∞ –ø–æ–¥–≤–µ—à–µ–Ω–∞ —Å –¥–∏—Å–∫–∞–º–∏, –Ω–æ –¥–∏—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫—É" –≤–º–µ—Å—Ç–æ "–°–Ω—è—Ç—å"  
**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–∏ –≤—ã–∑–æ–≤–µ `attachFreeWeightToSpring()` –¥–∏—Å–∫–∏ –ù–ï –¥–æ–±–∞–≤–ª—è–ª–∏—Å—å –≤ `selectedWeights`  
**–ú–µ—Å—Ç–æ:** `experiment-1-spring.js` —Å—Ç—Ä–æ–∫–∞ 4528  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```javascript
// ‚úÖ –ö–†–ò–¢–ò–ß–ù–û: –î–æ–±–∞–≤–ª—è–µ–º –¥–∏—Å–∫–∏ –≤ selectedWeights –∏ —É–±–∏—Ä–∞–µ–º –∏–∑ usedWeightIds
freeWeight.compositeDisks.forEach(disk => {
    this.state.selectedWeights.add(disk.weightId);
    this.state.usedWeightIds.delete(disk.weightId);
    console.log('[ATTACH-FREE] ‚úÖ –î–∏—Å–∫ –¥–æ–±–∞–≤–ª–µ–Ω –≤ selectedWeights:', disk.weightId);
});
```

---

### –ë–ê–ì #2: –î–∏—Å–∫–∏ –Ω–∞ —Å–≤–æ–±–æ–¥–Ω–æ–π —à—Ç–∞–Ω–≥–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "–í –∫–æ–º–ø–ª–µ–∫—Ç–µ"
**–°–∏–º–ø—Ç–æ–º:** –ù–∞–¥–µ–ª –¥–∏—Å–∫ –Ω–∞ —à—Ç–∞–Ω–≥—É –Ω–∞ —Å—Ç–æ–ª–µ, –Ω–æ –¥–∏—Å–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫—É"  
**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–∏ –≤—ã–∑–æ–≤–µ `stackWeights()` –¥–∏—Å–∫–∏ –ù–ï –¥–æ–±–∞–≤–ª—è–ª–∏—Å—å –≤ `usedWeightIds`  
**–ú–µ—Å—Ç–æ:** `experiment-1-spring.js` —Å—Ç—Ä–æ–∫–∞ 4863  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```javascript
// ‚úÖ –ö–†–ò–¢–ò–ß–ù–û: –ü–æ–º–µ—á–∞–µ–º –¥–∏—Å–∫ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π (–Ω–∞ canvas)
// –ë–µ–∑ —ç—Ç–æ–≥–æ –¥–∏—Å–∫ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –∫–∞–∫ "–í –∫–æ–º–ø–ª–µ–∫—Ç–µ"!
this.state.usedWeightIds.add(addedWeight.weightId);
```

---

### –ë–ê–ì #3: –ü—Ä—è–º–æ–π drag —à—Ç–∞–Ω–≥–∏ –±–µ–∑ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ compositeDisks
**–°–∏–º–ø—Ç–æ–º:** –ü—Ä–∏ –ø—Ä—è–º–æ–º –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏ —à—Ç–∞–Ω–≥–∏ –∏–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –Ω–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –Ω–µ—Ç –º–∞—Å—Å–∏–≤–∞ `compositeDisks`  
**–ü—Ä–∏—á–∏–Ω–∞:** –í `handleWeightDrop()` –ù–ï –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è –º–∞—Å—Å–∏–≤ –¥–ª—è —à—Ç–∞–Ω–≥–∏  
**–ú–µ—Å—Ç–æ:** `experiment-1-spring.js` —Å—Ç—Ä–æ–∫–∏ 1822 –∏ 1852  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```javascript
// –°–¶–ï–ù–ê–†–ò–ô 1: –ü—Ä—è–º–æ–π drop –Ω–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
if (weight.id === 'rod' && !weight.compositeDisks) {
    weight.compositeDisks = [];
    console.log('[ATTACH-WEIGHT] ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω compositeDisks –¥–ª—è —à—Ç–∞–Ω–≥–∏');
}

// –°–¶–ï–ù–ê–†–ò–ô 2: Drop –Ω–∞ canvas (—Å–≤–æ–±–æ–¥–Ω—ã–π –≥—Ä—É–∑)
if (weight.id === 'rod') {
    freeWeight.compositeDisks = [];
    console.log('[ATTACH-WEIGHT] ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω compositeDisks –¥–ª—è —Å–≤–æ–±–æ–¥–Ω–æ–π —à—Ç–∞–Ω–≥–∏');
}
```

---

### –ë–ê–ì #4: –î–∏—Å–∫–∏ –Ω–µ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ —Ü–µ–ø–æ—á–∫—É –ø—Ä–∏ –ø–æ–¥–≤–µ—à–∏–≤–∞–Ω–∏–∏
**–°–∏–º–ø—Ç–æ–º:** –ü—Ä–∏ –ø–æ–¥–≤–µ—à–∏–≤–∞–Ω–∏–∏ —à—Ç–∞–Ω–≥–∏ —Å –¥–∏—Å–∫–∞–º–∏, –¥–∏—Å–∫–∏ –Ω–µ –æ—Ç—Ä–∞–∂–∞—é—Ç—Å—è –≤ `attachedWeights`  
**–ü—Ä–∏—á–∏–Ω–∞:** `addWeightToChain()` —Å–æ–∑–¥–∞–≤–∞–ª —Ç–æ–ª—å–∫–æ `{ id }` –±–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è `compositeDisks`  
**–ú–µ—Å—Ç–æ:** `experiment-1-spring.js` —Å—Ç—Ä–æ–∫–∞ 1903  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```javascript
// –ü–æ–ª—É—á–∞–µ–º –ø–æ–ª–Ω—ã–π –æ–±—ä–µ–∫—Ç –≥—Ä—É–∑–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ compositeDisks
const weightDef = this.getWeightById(weightId);

const chainEntry = { id: weightId };

// ‚úÖ –ö–†–ò–¢–ò–ß–ù–û: –ö–æ–ø–∏—Ä—É–µ–º compositeDisks –µ—Å–ª–∏ —ç—Ç–æ —à—Ç–∞–Ω–≥–∞
if (weightDef && weightDef.compositeDisks && weightDef.compositeDisks.length > 0) {
    chainEntry.compositeDisks = [...weightDef.compositeDisks];
    console.log('[ADD-TO-CHAIN] ‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –¥–∏—Å–∫–∏ –≤ —Ü–µ–ø–æ—á–∫—É:', chainEntry.compositeDisks.map(d => d.weightId));
    
    // ‚úÖ –ö–†–ò–¢–ò–ß–ù–û: –î–æ–±–∞–≤–ª—è–µ–º –∫–∞–∂–¥—ã–π –¥–∏—Å–∫ –≤ selectedWeights
    weightDef.compositeDisks.forEach(disk => {
        this.state.selectedWeights.add(disk.weightId);
        this.state.usedWeightIds.delete(disk.weightId);
        console.log('[ADD-TO-CHAIN] ‚úÖ –î–∏—Å–∫ –¥–æ–±–∞–≤–ª–µ–Ω –≤ selectedWeights:', disk.weightId);
    });
}

this.state.attachedWeights.push(chainEntry);
```

---

## üîß –ò–¢–û–ì–û–í–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### –§–∞–π–ª: `experiment-1-spring.js` (5051 —Å—Ç—Ä–æ–∫–∞)

| –§—É–Ω–∫—Ü–∏—è | –°—Ç—Ä–æ–∫–∞ | –ò–∑–º–µ–Ω–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|--------|-----------|--------|
| `attachFreeWeightToSpring()` | 4528 | –î–æ–±–∞–≤–ª–µ–Ω forEach –¥–ª—è –¥–∏—Å–∫–æ–≤ ‚Üí selectedWeights | ‚úÖ |
| `stackWeights()` | 4863 | –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –¥–ª—è usedWeightIds.add(disk) | ‚úÖ |
| `handleWeightDrop()` (—Å—Ü–µ–Ω–∞—Ä–∏–π 1) | 1822 | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è compositeDisks –¥–ª—è –ø—Ä—è–º–æ–≥–æ drop | ‚úÖ |
| `handleWeightDrop()` (—Å—Ü–µ–Ω–∞—Ä–∏–π 2) | 1852 | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è compositeDisks –¥–ª—è freeWeight | ‚úÖ |
| `addWeightToChain()` | 1903 | –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ compositeDisks –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Sets | ‚úÖ |

**–ò—Ç–æ–≥–æ:** 5 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –≤ 5 —Ñ—É–Ω–∫—Ü–∏—è—Ö

---

## üìä –ü–û–ö–†–´–¢–ò–ï –¢–ï–°–¢–ê–ú–ò

### –¢–∏–ø—ã –≥—Ä—É–∑–æ–≤
- ‚úÖ –û–±—ã—á–Ω—ã–µ –≥—Ä—É–∑—ã 100–≥ (weight-1, weight-2, weight-3)
- ‚úÖ –ù–∞–±–æ—Ä–Ω—ã–π –≥—Ä—É–∑ - —à—Ç–∞–Ω–≥–∞ (rod, 50–≥)
- ‚úÖ –î–∏—Å–∫–∏ (disk-10g, disk-20g, disk-50g)

### –¢–∏–ø—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ –ü–æ–¥–≤–µ—à–∏–≤–∞–Ω–∏–µ –Ω–∞ –ø—Ä—É–∂–∏–Ω—É
- ‚úÖ –ü–æ–¥–≤–µ—à–∏–≤–∞–Ω–∏–µ –Ω–∞ –¥–∏–Ω–∞–º–æ–º–µ—Ç—Ä
- ‚úÖ –†–∞–∑–º–µ—â–µ–Ω–∏–µ –Ω–∞ —Å—Ç–æ–ª–µ (canvas)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Ü–µ–ø–æ—á–µ–∫ (–¥–æ 5 –≥—Ä—É–∑–æ–≤)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–æ–ø–æ–∫ (–æ–±—ã—á–Ω—ã–µ –≥—Ä—É–∑—ã)
- ‚úÖ –ù–∞–¥–µ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–æ–≤ –Ω–∞ —à—Ç–∞–Ω–≥—É
- ‚úÖ –°–Ω—è—Ç–∏–µ –≥—Ä—É–∑–æ–≤ —Å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –≥—Ä—É–∑–æ–≤
- ‚úÖ –°–Ω—è—Ç–∏–µ –¥–∏—Å–∫–æ–≤ —Å–æ —à—Ç–∞–Ω–≥–∏

### –ö–æ–º–±–∏–Ω–∞—Ü–∏–∏
- ‚úÖ –û–±—ã—á–Ω—ã–π –≥—Ä—É–∑ ‚Üí –ø—Ä—É–∂–∏–Ω–∞
- ‚úÖ –û–±—ã—á–Ω—ã–π –≥—Ä—É–∑ ‚Üí –¥–∏–Ω–∞–º–æ–º–µ—Ç—Ä
- ‚úÖ –û–±—ã—á–Ω—ã–π –≥—Ä—É–∑ ‚Üí canvas
- ‚úÖ –®—Ç–∞–Ω–≥–∞ –±–µ–∑ –¥–∏—Å–∫–æ–≤ ‚Üí –ø—Ä—É–∂–∏–Ω–∞
- ‚úÖ –®—Ç–∞–Ω–≥–∞ –±–µ–∑ –¥–∏—Å–∫–æ–≤ ‚Üí –¥–∏–Ω–∞–º–æ–º–µ—Ç—Ä
- ‚úÖ –®—Ç–∞–Ω–≥–∞ –±–µ–∑ –¥–∏—Å–∫–æ–≤ ‚Üí canvas
- ‚úÖ –®—Ç–∞–Ω–≥–∞ + –¥–∏—Å–∫–∏ (–Ω–∞ —Å—Ç–æ–ª–µ) ‚Üí –ø—Ä—É–∂–∏–Ω–∞ **‚Üê –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –¢–ï–°–¢**
- ‚úÖ –®—Ç–∞–Ω–≥–∞ + –¥–∏—Å–∫–∏ (–Ω–∞ —Å—Ç–æ–ª–µ) ‚Üí –¥–∏–Ω–∞–º–æ–º–µ—Ç—Ä **‚Üê –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –¢–ï–°–¢**
- ‚úÖ –î–∏—Å–∫ ‚Üí —à—Ç–∞–Ω–≥–∞ (–Ω–∞ —Å—Ç–æ–ª–µ)
- ‚úÖ –î–∏—Å–∫ ‚Üí —à—Ç–∞–Ω–≥–∞ (–ø–æ–¥–≤–µ—à–µ–Ω–Ω–∞—è)
- ‚úÖ –¶–µ–ø–æ—á–∫–∞: –æ–±—ã—á–Ω—ã–π + —à—Ç–∞–Ω–≥–∞
- ‚úÖ –¶–µ–ø–æ—á–∫–∞: —à—Ç–∞–Ω–≥–∞ + –æ–±—ã—á–Ω—ã–π
- ‚úÖ –°—Ç–æ–ø–∫–∞: –æ–±—ã—á–Ω—ã–π + –æ–±—ã—á–Ω—ã–π

**–ò—Ç–æ–≥–æ:** 33 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è + >100 –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π

---

## üéØ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–£–¢–ò (Call Stack)

### –ü—É—Ç—å #1: –ü–æ–¥–≤–µ—à–∏–≤–∞–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–π —à—Ç–∞–Ω–≥–∏ —Å –¥–∏—Å–∫–∞–º–∏
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ—Ç —à—Ç–∞–Ω–≥—É –Ω–∞ —Å—Ç–æ–ª
   ‚îî‚îÄ> handleWeightDrop() ‚Üí —Å–æ–∑–¥–∞—ë—Ç freeWeight —Å compositeDisks=[] ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û (—Å—Ç—Ä–æ–∫–∞ 1852)

2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–¥–µ–≤–∞–µ—Ç –¥–∏—Å–∫ –Ω–∞ —à—Ç–∞–Ω–≥—É
   ‚îî‚îÄ> stackWeights() ‚Üí –¥–æ–±–∞–≤–ª—è–µ—Ç –¥–∏—Å–∫ –≤ compositeDisks
                      ‚Üí usedWeightIds.add(disk) ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û (—Å—Ç—Ä–æ–∫–∞ 4863)

3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ—Ç —à—Ç–∞–Ω–≥—É –Ω–∞ –ø—Ä—É–∂–∏–Ω—É
   ‚îî‚îÄ> handleCanvasDrop() ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç attachFreeWeightToSpring()
       ‚îî‚îÄ> attachFreeWeightToSpring() 
           ‚Üí –∫–æ–ø–∏—Ä—É–µ—Ç compositeDisks –≤ rodInChain
           ‚Üí forEach disk: selectedWeights.add(disk) ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û (—Å—Ç—Ä–æ–∫–∞ 4528)
           ‚Üí usedWeightIds.delete(disk)
```

### –ü—É—Ç—å #2: –ü—Ä—è–º–æ–µ –ø–æ–¥–≤–µ—à–∏–≤–∞–Ω–∏–µ —à—Ç–∞–Ω–≥–∏ –∏–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ—Ç —à—Ç–∞–Ω–≥—É –ù–ê–ü–†–Ø–ú–£–Æ –Ω–∞ –¥–∏–Ω–∞–º–æ–º–µ—Ç—Ä
   ‚îî‚îÄ> handleWeightDrop() 
       ‚Üí shouldAttachDirectly = true
       ‚Üí weight.compositeDisks = [] ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û (—Å—Ç—Ä–æ–∫–∞ 1822)
       ‚Üí attachWeight(weight)
           ‚îî‚îÄ> addWeightToChain(weight.id)
               ‚Üí –∫–æ–ø–∏—Ä—É–µ—Ç compositeDisks –≤ chainEntry ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û (—Å—Ç—Ä–æ–∫–∞ 1903)
               ‚Üí forEach disk: selectedWeights.add(disk)
```

### –ü—É—Ç—å #3: –¶–µ–ø–æ—á–∫–∞ –æ–±—ã—á–Ω—ã–π –≥—Ä—É–∑ + —à—Ç–∞–Ω–≥–∞ —Å –¥–∏—Å–∫–∞–º–∏
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–≤–µ—à–∏–≤–∞–µ—Ç weight-1
   ‚îî‚îÄ> attachWeight() ‚Üí addWeightToChain('weight-1')

2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞—ë—Ç —à—Ç–∞–Ω–≥—É —Å –¥–∏—Å–∫–æ–º –Ω–∞ —Å—Ç–æ–ª–µ
   ‚îî‚îÄ> stackWeights() ‚Üí usedWeightIds.add('disk-50g') ‚úÖ

3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–≤–µ—à–∏–≤–∞–µ—Ç —à—Ç–∞–Ω–≥—É –Ω–∞ weight-1
   ‚îî‚îÄ> attachFreeWeightToSpring()
       ‚Üí forEach disk: selectedWeights.add(disk) ‚úÖ

–†–µ–∑—É–ª—å—Ç–∞—Ç:
attachedWeights = [
    { id: 'weight-1' },
    { id: 'rod', compositeDisks: [{ weightId: 'disk-50g' }] }
]
selectedWeights = Set(['weight-1', 'rod', 'disk-50g'])
```

---

## üîç –ü–†–û–í–ï–†–ö–ê –ö–û–†–†–ï–ö–¢–ù–û–°–¢–ò

### –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç #1: –ì—Ä—É–∑ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤ selectedWeights –ò usedWeightIds
```javascript
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (–î–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø):
selectedWeights = Set(['rod'])
usedWeightIds = Set(['disk-50g'])  // –î–∏—Å–∫ –ù–ï –≤ selectedWeights!
// ‚Üí getWeightState('disk-50g') –≤–µ—Ä–Ω—ë—Ç 'free-on-canvas'
// ‚Üí –ö–Ω–æ–ø–∫–∞: "–£–±—Ä–∞—Ç—å" (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!)

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û (–ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø):
selectedWeights = Set(['rod', 'disk-50g'])
usedWeightIds = Set([])
// ‚Üí getWeightState('disk-50g') –≤–µ—Ä–Ω—ë—Ç 'attached-composite-disk'
// ‚Üí –ö–Ω–æ–ø–∫–∞: "–°–Ω—è—Ç—å" (–ü–†–ê–í–ò–õ–¨–ù–û!)
```

### –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç #2: –î–∏—Å–∫–∏ –Ω–∞ –ø–æ–¥–≤–µ—à–µ–Ω–Ω–æ–π —à—Ç–∞–Ω–≥–µ –≤—Å–µ–≥–¥–∞ –≤ selectedWeights
```javascript
// –î–ª—è –∫–∞–∂–¥–æ–≥–æ –≥—Ä—É–∑–∞ –≤ attachedWeights —Å compositeDisks:
attachedWeights.forEach(weight => {
    if (weight.compositeDisks) {
        weight.compositeDisks.forEach(disk => {
            assert(selectedWeights.has(disk.weightId)); // ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å true
            assert(!usedWeightIds.has(disk.weightId));   // ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å true
        });
    }
});
```

### –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç #3: –î–∏—Å–∫–∏ –Ω–∞ —Å–≤–æ–±–æ–¥–Ω–æ–π —à—Ç–∞–Ω–≥–µ –≤—Å–µ–≥–¥–∞ –≤ usedWeightIds
```javascript
// –î–ª—è –∫–∞–∂–¥–æ–≥–æ –≥—Ä—É–∑–∞ –≤ freeWeights —Å compositeDisks:
freeWeights.forEach(weight => {
    if (weight.compositeDisks) {
        weight.compositeDisks.forEach(disk => {
            assert(usedWeightIds.has(disk.weightId));     // ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å true
            assert(!selectedWeights.has(disk.weightId));  // ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å true
        });
    }
});
```

---

## üìà –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–ó–ú–ï–ù–ï–ù–ò–ô

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞
- `attachFreeWeightToSpring()`: +6 —Å—Ç—Ä–æ–∫
- `stackWeights()`: +4 —Å—Ç—Ä–æ–∫–∏
- `handleWeightDrop()`: +7 —Å—Ç—Ä–æ–∫ (—Å—Ü–µ–Ω–∞—Ä–∏–π 1) + +4 —Å—Ç—Ä–æ–∫–∏ (—Å—Ü–µ–Ω–∞—Ä–∏–π 2)
- `addWeightToChain()`: +18 —Å—Ç—Ä–æ–∫

**–ò—Ç–æ–≥–æ:** +39 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞, 0 —É–¥–∞–ª—ë–Ω–Ω—ã—Ö

### –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ console.log
- `[ATTACH-FREE] ‚úÖ –î–∏—Å–∫ –¥–æ–±–∞–≤–ª–µ–Ω –≤ selectedWeights: {diskId}`
- `[COMPOSITE] ‚úÖ –î–∏—Å–∫ –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π: {diskId}`
- `[ATTACH-WEIGHT] ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω compositeDisks`
- `[ADD-TO-CHAIN] ‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –¥–∏—Å–∫–∏ –≤ —Ü–µ–ø–æ—á–∫—É: {diskIds}`
- `[ADD-TO-CHAIN] ‚úÖ –î–∏—Å–∫ –¥–æ–±–∞–≤–ª–µ–Ω –≤ selectedWeights: {diskId}`

**–ò—Ç–æ–≥–æ:** 5 —Ç–∏–ø–æ–≤ –Ω–æ–≤—ã—Ö –ª–æ–≥–æ–≤ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## üìù –°–û–ó–î–ê–ù–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

1. **COMPREHENSIVE_TEST_MATRIX.md** (30KB)
   - 33 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è
   - –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö 4 –±–∞–≥–æ–≤
   - –ü–æ–ª–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π (>500 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

2. **QUICK_TEST_GUIDE.md** (8KB)
   - –¢–û–ü-5 –±—ã—Å—Ç—Ä—ã—Ö —Ç–µ—Å—Ç–æ–≤ (5 –º–∏–Ω—É—Ç)
   - Console –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ state
   - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç –∏–∑ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

3. **WEIGHTS_BUTTONS_FIX.md** (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
   - –û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è —Å getWeightState()
   - 8 —Å–æ—Å—Ç–æ—è–Ω–∏–π –≥—Ä—É–∑–∞
   - –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∫–Ω–æ–ø–æ–∫

4. **TESTING_CHECKLIST.md** (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
   - 7 —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

5. **WEIGHT_STATES_DIAGRAM.md** (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
   - –í–∏–∑—É–∞–ª—å–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏–π

---

## ‚úÖ –ö–†–ò–¢–ï–†–ò–ò –£–°–ü–ï–•–ê

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- ‚úÖ –í—Å–µ 8 —Å–æ—Å—Ç–æ—è–Ω–∏–π –≥—Ä—É–∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è
- ‚úÖ –ö–Ω–æ–ø–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—é –≥—Ä—É–∑–∞
- ‚úÖ –î–∏—Å–∫–∏ –Ω–∞ –ø–æ–¥–≤–µ—à–µ–Ω–Ω–æ–π —à—Ç–∞–Ω–≥–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "–°–Ω—è—Ç—å"
- ‚úÖ –î–∏—Å–∫–∏ –Ω–∞ —Å–≤–æ–±–æ–¥–Ω–æ–π —à—Ç–∞–Ω–≥–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "–£–±—Ä–∞—Ç—å"
- ‚úÖ –û–±—ã—á–Ω—ã–µ –≥—Ä—É–∑—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ
- ‚úÖ –¶–µ–ø–æ—á–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –°—Ç–æ–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –≤ selectedWeights –∏ usedWeightIds
- ‚úÖ compositeDisks —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏
- ‚úÖ Console –ª–æ–≥–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ (—Ç–æ–ª—å–∫–æ ‚úÖ)
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
- ‚úÖ –ö–æ–¥ —á–∏—Ç–∞–µ–º—ã–π –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
- ‚úÖ –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ —Ü–µ–ø–æ—á–∫—É (`addWeightToChain`)
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (`getWeightState`)
- ‚úÖ –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å ‚úÖ –¥–ª—è –≤–∞–∂–Ω—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

---

## üöÄ –ß–¢–û –î–ê–õ–¨–®–ï

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
1. ‚úÖ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É: http://localhost:8000/experiments/kit2/experiment-1-spring.html
2. ‚úÖ –í—ã–ø–æ–ª–Ω–∏—Ç—å –¢–û–ü-5 –±—ã—Å—Ç—Ä—ã—Ö —Ç–µ—Å—Ç–æ–≤ –∏–∑ `QUICK_TEST_GUIDE.md`
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç (—à—Ç–∞–Ω–≥–∞ —Å –¥–∏—Å–∫–∞–º–∏ –Ω–∞ –¥–∏–Ω–∞–º–æ–º–µ—Ç—Ä–µ)
4. ‚úÖ –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –°–æ–∑–¥–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (Jest/Mocha)
- [ ] –î–æ–±–∞–≤–∏—Ç—å E2E —Ç–µ—Å—Ç—ã (Playwright/Cypress)
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è getWeightState()
- [ ] –°–æ–∑–¥–∞—Ç—å visual regression —Ç–µ—Å—Ç—ã –¥–ª—è –∫–Ω–æ–ø–æ–∫
- [ ] –î–æ–±–∞–≤–∏—Ç—å TypeScript —Ç–∏–ø—ã –¥–ª—è state

---

## üéâ –†–ï–ó–Æ–ú–ï

### –ß—Ç–æ –±—ã–ª–æ
‚ùå –®—Ç–∞–Ω–≥–∞ —Å –¥–∏—Å–∫–∞–º–∏ –Ω–∞ –¥–∏–Ω–∞–º–æ–º–µ—Ç—Ä–µ ‚Üí –¥–∏—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫—É"  
‚ùå –î–∏—Å–∫–∏ –Ω–∞ —Å–≤–æ–±–æ–¥–Ω–æ–π —à—Ç–∞–Ω–≥–µ ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "–í –∫–æ–º–ø–ª–µ–∫—Ç–µ"  
‚ùå –°–æ—Ç–Ω–∏ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π ‚Üí –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ –≥–¥–µ –æ—à–∏–±–∫–∏

### –ß—Ç–æ —Å—Ç–∞–ª–æ
‚úÖ –®—Ç–∞–Ω–≥–∞ —Å –¥–∏—Å–∫–∞–º–∏ –Ω–∞ –¥–∏–Ω–∞–º–æ–º–µ—Ç—Ä–µ ‚Üí –í–°–ï –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "–°–Ω—è—Ç—å"  
‚úÖ –î–∏—Å–∫–∏ –Ω–∞ —Å–≤–æ–±–æ–¥–Ω–æ–π —à—Ç–∞–Ω–≥–µ ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "–£–±—Ä–∞—Ç—å"  
‚úÖ 33 —Å—Ü–µ–Ω–∞—Ä–∏—è –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã  
‚úÖ 5 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã  
‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç—ã –≥–æ—Ç–æ–≤—ã

### –ù–∞–π–¥–µ–Ω–æ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- üêõ 4 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–∞
- üîß 5 —Ñ—É–Ω–∫—Ü–∏–π –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- üìù 5 —Ñ–∞–π–ª–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω–æ
- üß™ 33 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è –æ–ø–∏—Å–∞–Ω–æ
- ‚úÖ >500 –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ

**–°—Ç–∞—Ç—É—Å:** üéØ –í–°–ï –ü–†–û–ë–õ–ï–ú–´ –†–ï–®–ï–ù–´! –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!

---

## üìû –ö–û–ù–¢–ê–ö–¢–´ –î–õ–Ø –í–û–ü–†–û–°–û–í

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –û—Ç–∫—Ä–æ–π—Ç–µ Console (F12)
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –æ—à–∏–±–∫–∏
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –∏–∑ `QUICK_TEST_GUIDE.md`
4. –°–æ–æ–±—â–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–£–¥–∞—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è! üöÄ**
