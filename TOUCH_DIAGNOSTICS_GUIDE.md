# üîç Touch Diagnostics - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## –ü—Ä–æ–±–ª–µ–º–∞
–ù–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–∞—á-–ø–∞–Ω–µ–ª—è—Ö –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ "—Å–æ—Å–∫–∞–∫–∏–≤–∞–µ—Ç" –ø—Ä–∏ –∫–∞—Å–∞–Ω–∏–∏ - –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∑–∞—Ö–≤–∞—Ç–∏—Ç—å –∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç—å.

## –†–µ—à–µ–Ω–∏–µ

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–Ω–∞ —Ç–∞—á-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö)
–ú–æ–¥—É–ª—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç—Å—è** –Ω–∞ —Ç–∞—á-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

### 2. –†—É—á–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ (–Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ)
–ï—Å–ª–∏ –≤—ã –Ω–∞ –æ–±—ã—á–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ, –º–æ–∂–µ—Ç–µ –≤–∫–ª—é—á–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏:

#### A. –ì–æ—Ä—è—á–∞—è –∫–ª–∞–≤–∏—à–∞
```
Ctrl + Shift + D
```

#### B. –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
```javascript
window.touchDiag.enable()
```

### 3. –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

#### –û–≤–µ—Ä–ª–µ–π –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É:
- **–ê–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Å–∞–Ω–∏—è** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–ª—å—Ü–µ–≤ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –∏ –∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- **–ò—Å—Ç–æ—Ä–∏—è —Å–æ–±—ã—Ç–∏–π** - –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å–æ–±—ã—Ç–∏–π —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏:
  - üîµ `touchstart` - –∫–∞—Å–∞–Ω–∏–µ –Ω–∞—á–∞–ª–æ—Å—å
  - üü° `touchmove` - –ø–∞–ª–µ—Ü –¥–≤–∏–∂–µ—Ç—Å—è
  - üü† `touchend` - –ø–∞–ª–µ—Ü –æ—Ç–ø—É—â–µ–Ω
  - üî¥ `touchcancel` ‚ö†Ô∏è - –∫–∞—Å–∞–Ω–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ (–ü–†–û–ë–õ–ï–ú–ê!)
  - üü£ `mousedown/move/up` - —Å–æ–±—ã—Ç–∏—è –º—ã—à–∏
  - üî∑ `pointerdown/move/up` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ pointer events

#### –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è:
- **–ó–µ–ª—ë–Ω—ã–π** üü¢ - –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- **–ñ—ë–ª—Ç—ã–π** üü° - –¥–≤–∏–∂–µ–Ω–∏–µ
- **–û—Ä–∞–Ω–∂–µ–≤—ã–π** üü† - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
- **–ö—Ä–∞—Å–Ω—ã–π** üî¥ - –û–¢–ú–ï–ù–ê (—ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞!)
- **–§–∏–æ–ª–µ—Ç–æ–≤—ã–π** üü£ - mouse events
- **–ì–æ–ª—É–±–æ–π** üîµ - pointer events

### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### A. –î–æ–±–∞–≤–ª–µ–Ω–∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `getEventCoords()`
```javascript
// –†–∞–±–æ—Ç–∞–µ—Ç —Å mouse, touch –∏ pointer events
const coords = getEventCoords(e);
```

#### B. –î–æ–±–∞–≤–ª–µ–Ω `preventDefault()` –¥–ª—è touch events
```javascript
e.preventDefault(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–∫—Ä—É—Ç–∫—É –∏ –∑—É–º
```

#### C. –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–ª—É—à–∞—Ç–µ–ª–∏ –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π
```javascript
// –†–∞–Ω—å—à–µ: —Ç–æ–ª—å–∫–æ mousemove/mouseup
window.addEventListener('mousemove', handlePointerMove);
window.addEventListener('mouseup', handlePointerUp);

// –¢–µ–ø–µ—Ä—å: + touchmove/touchend/touchcancel
window.addEventListener('touchmove', handlePointerMove, { passive: false });
window.addEventListener('touchend', handlePointerUp);
window.addEventListener('touchcancel', handlePointerUp);
```

#### D. CSS —Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è —Ç–∞—á-—É—Å—Ç—Ä–æ–π—Å—Ç–≤
```css
touch-action: none; /* –û—Ç–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–∫—Ä—É—Ç–∫—É/–∑—É–º */
user-select: none; /* –û—Ç–∫–ª—é—á–∞–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ */
-webkit-touch-callout: none; /* –û—Ç–∫–ª—é—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –Ω–∞ iOS */
```

### 5. –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã "—Å–æ—Å–∫–∞–∫–∏–≤–∞–Ω–∏—è"

#### –°–∏–º–ø—Ç–æ–º—ã:
1. –ö–∞—Å–∞–µ—Ç–µ—Å—å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è ‚Üí –≤–∏–¥–∏—Ç–µ `touchstart`
2. –ù–∞—á–∏–Ω–∞–µ—Ç–µ —Ç–∞—â–∏—Ç—å ‚Üí –≤–∏–¥–∏—Ç–µ `touchmove`
3. –í–Ω–µ–∑–∞–ø–Ω–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è `touchcancel` ‚ö†Ô∏è
4. –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ "—Å–æ—Å–∫–∞–∫–∏–≤–∞–µ—Ç" –æ–±—Ä–∞—Ç–Ω–æ

#### –ü—Ä–∏—á–∏–Ω—ã `touchcancel`:
- **–ü—Ä–æ–∫—Ä—É—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** - –±—Ä–∞—É–∑–µ—Ä –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç touch –¥–ª—è —Å–∫—Ä–æ–ª–ª–∞
- **–ó—É–º** - –±—Ä–∞—É–∑–µ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–°–∏—Å—Ç–µ–º–Ω—ã–µ –∂–µ—Å—Ç—ã** - —Å–≤–∞–π–ø –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–∞–∑–∞–¥ –∏ —Ç.–¥.
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é** - –¥–æ–ª–≥–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ iOS/Android

#### –†–µ—à–µ–Ω–∏—è (–£–ñ–ï –ü–†–ò–ú–ï–ù–ï–ù–´):
‚úÖ `touch-action: none` –≤ CSS
‚úÖ `e.preventDefault()` –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö
‚úÖ `{ passive: false }` –¥–ª—è touchmove
‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ `touchcancel` –∫–∞–∫ `touchend`

### 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–∞–Ω–µ–ª–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç –Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏
2. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1 —Å–µ–∫—É–Ω–¥—É - –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤–∫–ª—é—á–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. –ö–æ—Å–Ω–∏—Ç–µ—Å—å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è (–ø—Ä—É–∂–∏–Ω—ã –∏–ª–∏ –≥—Ä—É–∑–∞)
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤ –ø—Ä–∞–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª:
   - –í–∏–¥–∏—Ç–µ `touchstart`? ‚úÖ –ö–∞—Å–∞–Ω–∏–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ
   - –í–∏–¥–∏—Ç–µ `touchmove`? ‚úÖ –î–≤–∏–∂–µ–Ω–∏–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è
   - –í–∏–¥–∏—Ç–µ `touchcancel`? ‚ùå –ü–†–û–ë–õ–ï–ú–ê - –±—Ä–∞—É–∑–µ—Ä –æ—Ç–º–µ–Ω—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ
   - –í–∏–¥–∏—Ç–µ `touchend`? ‚úÖ –û—Ç–ø—É—Å–∫–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ

### 7. –ö–æ–º–∞–Ω–¥—ã –∫–æ–Ω—Å–æ–ª–∏

```javascript
// –í–∫–ª—é—á–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
window.touchDiag.enable()

// –í—ã–∫–ª—é—á–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
window.touchDiag.disable()

// –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å
window.touchDiag.toggle()

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–π —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç
window.experiment

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
window.experiment.state
```

### 8. –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞—ë—Ç—Å—è

#### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ:
1. **–ú–Ω–æ–≥–æ `touchcancel` —Å–æ–±—ã—Ç–∏–π** ‚Üí CSS –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–ª—Å—è –∏–ª–∏ –±—Ä–∞—É–∑–µ—Ä –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç `preventDefault()`
2. **–ù–µ—Ç `touchmove` –ø–æ—Å–ª–µ `touchstart`** ‚Üí –°–æ–±—ã—Ç–∏—è –Ω–µ –¥–æ—Ö–æ–¥—è—Ç –¥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
3. **–°–æ–±—ã—Ç–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç, –Ω–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø—Ä—ã–≥–∞—é—Ç** ‚Üí –ü—Ä–æ–±–ª–µ–º–∞ —Å `getBoundingClientRect()`

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –ø–∞–Ω–µ–ª–∏:
console.log('Touch support:', 'ontouchstart' in window);
console.log('Max touch points:', navigator.maxTouchPoints);
console.log('Pointer events:', 'onpointerdown' in window);
```

### 9. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
```
‚úÖ All libraries loaded successfully
‚úÖ Spring drag enabled (with touch support)
‚úÖ Touch diagnostics: Press Ctrl+Shift+D or call window.touchDiag.enable()
üì± Touch device detected! Enabling touch diagnostics...
üîç Touch diagnostics enabled. Press Ctrl+Shift+D to toggle.
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —ç—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è - –≤—Å—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!

### 10. –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

–ü–æ—Å–ª–µ –æ—Ç–ª–∞–¥–∫–∏ –≤—ã–∫–ª—é—á–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É:
- –ù–∞–∂–º–∏—Ç–µ `Ctrl + Shift + D`
- –ò–ª–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏: `window.touchDiag.disable()`

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:
1. `/experiments/shared/touch-diagnostics.js` - –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
2. `/experiments/kit2/experiment-1-spring.html` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥—É–ª—è
3. `/experiments/kit2/experiment-1-spring.js` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ touch
4. `/experiments/styles/experiment-common.css` - CSS –¥–ª—è —Ç–∞—á-—É—Å—Ç—Ä–æ–π—Å—Ç–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ mouse/touch/pointer events
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –∏ –∑—É–º–∞ –Ω–∞ —Ç–∞—á-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ touchcancel –∫–∞–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–∞—Å–∞–Ω–∏—è
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Ç–∞—á-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
- ‚úÖ –î–µ—Å–∫—Ç–æ–ø (–º—ã—à—å) - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ
- ‚úÖ –¢–∞—á-–ø–∞–Ω–µ–ª–∏ - —É–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Å–∞–Ω–∏–π
- ‚úÖ –ü–ª–∞–Ω—à–µ—Ç—ã/—Å–º–∞—Ä—Ç—Ñ–æ–Ω—ã - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- ‚úÖ –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å —Å—Ç–∏–ª—É—Å–æ–º - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ pointer events
