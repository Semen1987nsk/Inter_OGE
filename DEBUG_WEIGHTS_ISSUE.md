# üêõ –û–¢–õ–ê–î–ö–ê: –ì—Ä—É–∑—ã –ø–æ–º–µ—á–∞—é—Ç—Å—è "–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è" –Ω–æ –Ω–µ –ø–æ–¥–≤–µ—à–∏–≤–∞—é—Ç—Å—è

## –ü—Ä–æ–±–ª–µ–º–∞
- –í—Å–µ 3 –≥—Ä—É–∑–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è" (–∫–Ω–æ–ø–∫–∞ "–°–Ω—è—Ç—å")
- –ù–∞ canvas –ø—Ä—É–∂–∏–Ω–∞ –ø—É—Å—Ç–∞—è (–Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–¥–≤–µ—à–µ–Ω–æ)
- –í –∫–æ–Ω—Å–æ–ª–∏ –æ—à–∏–±–∫–∏: `[DETACH-WEIGHT] –ù–µ—Ç –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è`

## –ü—Ä–∏—á–∏–Ω–∞
–ì—Ä—É–∑—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ `usedWeightIds` –Ω–æ –ù–ï –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ `attachedWeights`.

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```javascript
window.experiment.state.usedWeightIds
// –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å Set —Å ID –≥—Ä—É–∑–æ–≤

window.experiment.state.attachedWeights
// –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ [] –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–¥–≤–µ—à–µ–Ω–æ

window.experiment.state.freeWeights
// –°–≤–æ–±–æ–¥–Ω—ã–µ –≥—Ä—É–∑—ã –Ω–∞ canvas

window.experiment.state.springAttached
// true –µ—Å–ª–∏ –ø—Ä—É–∂–∏–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
```

### 2. –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ - –æ—á–∏—Å—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è:
```javascript
window.experiment.state.usedWeightIds.clear()
window.experiment.renderWeightsInventory()
```

–≠—Ç–æ –≤–µ—Ä–Ω—ë—Ç –≤—Å–µ –≥—Ä—É–∑—ã –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å.

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–∫–∏ –ø–æ–¥–≤–µ—à–∏–≤–∞–Ω–∏—è:
```javascript
// –ü–æ—Å–ª–µ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –≥—Ä—É–∑–∞ —Å–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å:
// –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏:
[ATTACH-WEIGHT] handleWeightDrop start
[ATTACH-WEIGHT] Check spring drop: {distance: XX.X}
[ATTACH-WEIGHT] Direct drop on spring  // –ï—Å–ª–∏ –±–ª–∏–∑–∫–æ –∫ –ø—Ä—É–∂–∏–Ω–µ
[FREE-WEIGHT] Weight placed freely     // –ï—Å–ª–∏ –¥–∞–ª–µ–∫–æ
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ü—Ä—É–∂–∏–Ω–∞ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞: `window.experiment.state.springAttached`
- –†–µ—à–µ–Ω–∏–µ: –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –ø—Ä—É–∂–∏–Ω—É –∏–∑ "–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ" –Ω–∞ —à—Ç–∞—Ç–∏–≤

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ì—Ä—É–∑ –¥–æ–±–∞–≤–ª–µ–Ω –≤ usedWeightIds –Ω–æ –Ω–µ –ø–æ–¥–≤–µ—à–µ–Ω
- –ö–æ–≥–¥–∞: drop –Ω–∞ canvas –ù–ï —Ä—è–¥–æ–º —Å –ø—Ä—É–∂–∏–Ω–æ–π
- –ü–æ–≤–µ–¥–µ–Ω–∏–µ: –ì—Ä—É–∑ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π, –Ω–æ –æ—Å—Ç–∞—ë—Ç—Å—è —Å–≤–æ–±–æ–¥–Ω—ã–º
- –≠—Ç–æ –ü–†–ê–í–ò–õ–¨–ù–û - –≥—Ä—É–∑ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –Ω–æ –µ—â—ë –Ω–µ –ø–æ–¥–≤–µ—à–µ–Ω

### –ü—Ä–æ–±–ª–µ–º–∞ 3: attachWeight –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞: –ò—â–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ `[ATTACH-WEIGHT] attachWeight –≤—ã–∑–≤–∞–Ω`
- –ï—Å–ª–∏ –Ω–µ—Ç - –∑–Ω–∞—á–∏—Ç `shouldAttachDirectly = false`
- –ü—Ä–∏—á–∏–Ω–∞: –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –ø—Ä—É–∂–∏–Ω—ã > 80px

## –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

### –í–∞—Ä–∏–∞–Ω—Ç A: –ü—Ä—è–º–æ–µ –ø–æ–¥–≤–µ—à–∏–≤–∞–Ω–∏–µ
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä—É–∂–∏–Ω—É –Ω–∞ —à—Ç–∞—Ç–∏–≤
2. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –≥—Ä—É–∑ –ü–†–Ø–ú–û –Ω–∞ –Ω–∏–∂–Ω–∏–π –∫–æ–Ω–µ—Ü –ø—Ä—É–∂–∏–Ω—ã
3. –ï—Å–ª–∏ `distance < 80px` ‚Üí —Å—Ä–∞–∑—É –ø–æ–¥–≤–µ—à–∏–≤–∞–µ—Ç—Å—è
4. –ö–æ–Ω—Å–æ–ª—å: `[ATTACH-WEIGHT] Direct drop on spring`

### –í–∞—Ä–∏–∞–Ω—Ç B: –î–≤—É—Ö—ç—Ç–∞–ø–Ω–æ–µ –ø–æ–¥–≤–µ—à–∏–≤–∞–Ω–∏–µ
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä—É–∂–∏–Ω—É
2. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –≥—Ä—É–∑ –≤ –°–¢–û–†–û–ù–£ (–Ω–∞ "—Å—Ç–æ–ª")
3. –ö–æ–Ω—Å–æ–ª—å: `[FREE-WEIGHT] Weight placed freely`
4. –ì—Ä—É–∑ –ø–æ–º–µ—á–∞–µ—Ç—Å—è "–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è" (–≤ usedWeightIds)
5. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–≤–æ–±–æ–¥–Ω—ã–π –≥—Ä—É–∑ –ö –ü–†–£–ñ–ò–ù–ï
6. –ü–æ—è–≤–∏—Ç—Å—è –∑–µ–ª—ë–Ω—ã–π –∫—Ä—É–≥ ‚Üí –ø–æ–¥–≤–µ—Å–∏—Ç—Å—è
7. –ö–æ–Ω—Å–æ–ª—å: `[ATTACH-FREE] –ü–æ–¥–≤–µ—à–∏–≤–∞–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –≥—Ä—É–∑–∞`

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä—É–∂–∏–Ω—ã:
```javascript
window.experiment.state.springAttached === true
window.experiment.state.attachedSpringId === "spring50"
```

–ü–æ—Å–ª–µ drop –≥—Ä—É–∑–∞ –Ω–∞ canvas (–≤ —Å—Ç–æ—Ä–æ–Ω—É):
```javascript
window.experiment.state.freeWeights.length === 1
window.experiment.state.usedWeightIds.size === 1
window.experiment.state.attachedWeights.length === 0
```

–ü–æ—Å–ª–µ –ø–æ–¥–≤–µ—à–∏–≤–∞–Ω–∏—è –≥—Ä—É–∑–∞:
```javascript
window.experiment.state.freeWeights.length === 0
window.experiment.state.attachedWeights.length === 1
window.experiment.state.usedWeightIds.size === 1
```

## –ï—Å–ª–∏ –≤—Å—ë —Å–ª–æ–º–∞–ª–æ—Å—å

### –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è:
```javascript
window.experiment.state.usedWeightIds.clear()
window.experiment.state.freeWeights = []
window.experiment.state.attachedWeights = []
window.experiment.state.selectedWeights.clear()
window.experiment.renderWeightsInventory()
window.experiment.drawDynamic()
```

–ó–∞—Ç–µ–º –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+Shift+R).
