# üêõ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –û—à–∏–±–∫–∞: –ì—Ä—É–∑—ã –ù–µ –î–≤–∏–≥–∞–ª–∏—Å—å

**–î–∞—Ç–∞**: 19 –æ–∫—Ç—è–±—Ä—è 2025  
**–ü—Ä–æ–±–ª–µ–º–∞**: –ì—Ä—É–∑—ã –≤—ã–≥–ª—è–¥–µ–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –Ω–æ –Ω–µ –¥–≤–∏–≥–∞–ª–∏—Å—å –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –°–∏–º–ø—Ç–æ–º—ã:
- ‚úÖ –ì—Ä—É–∑—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è (—Ä–µ–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- ‚úÖ –ö—É—Ä—Å–æ—Ä –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `grab` –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
- ‚úÖ –ü—Ä–∏ –∫–ª–∏–∫–µ –∫—É—Ä—Å–æ—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `grabbing`
- ‚ùå –ì—Ä—É–∑ –ù–ï —Å–ª–µ–¥—É–µ—Ç –∑–∞ –∫—É—Ä—Å–æ—Ä–æ–º
- ‚ùå –í –∫–æ–Ω—Å–æ–ª–∏: `[FREE-WEIGHTS] Started dragging: free-123456`

### –ü—Ä–∏—á–∏–Ω–∞:
–ü–æ–ø—ã—Ç–∫–∞ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ –∫ **–ø—Ä–∏–º–∏—Ç–∏–≤–Ω–æ–π —Å—Ç—Ä–æ–∫–µ**!

```javascript
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
let isDragging = false;  // boolean

isDragging = 'freeweight';  // —Ç–µ–ø–µ—Ä—å string
isDragging.freeWeightRef = freeWeight;  // ‚ùå –û–®–ò–ë–ö–ê!
// –°—Ç—Ä–æ–∫–∞ - –ø—Ä–∏–º–∏—Ç–∏–≤, –Ω–µ–ª—å–∑—è –¥–æ–±–∞–≤–ª—è—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞!

// –í handlePointerMove:
if (isDragging === 'freeweight' && isDragging.freeWeightRef) {
    // isDragging.freeWeightRef === undefined
    // –£—Å–ª–æ–≤–∏–µ –õ–û–ñ–ù–û, –∫–æ–¥ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è!
}
```

**JavaScript –Ω–µ –≤—ã–¥–∞—ë—Ç –æ—à–∏–±–∫—É** –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ –∫ —Å—Ç—Ä–æ–∫–µ, –Ω–æ –æ–Ω–æ –ø—Ä–æ—Å—Ç–æ **–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è**!

```javascript
let str = "test";
str.property = "value";
console.log(str.property);  // undefined (—Å–≤–æ–π—Å—Ç–≤–æ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å!)
```

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –†–µ—à–µ–Ω–∏–µ:
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–æ—Ç–¥–µ–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –≥—Ä—É–∑:

```javascript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
let isDragging = false;           // –§–ª–∞–≥ —Ç–∏–ø–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
let draggedFreeWeight = null;     // üÜï –°—Å—ã–ª–∫–∞ –Ω–∞ –≥—Ä—É–∑ (–æ–±—ä–µ–∫—Ç)
let dragOffset = { x: 0, y: 0 };

// mousedown:
if (freeWeight) {
    isDragging = 'freeweight';     // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥
    draggedFreeWeight = freeWeight; // üîß –°–æ—Ö—Ä–∞–Ω—è–µ–º –°–°–´–õ–ö–£
    freeWeight.isDragging = true;
}

// mousemove:
if (isDragging === 'freeweight' && draggedFreeWeight) {
    draggedFreeWeight.x = x - dragOffset.x;  // ‚úÖ –†–ê–ë–û–¢–ê–ï–¢!
    draggedFreeWeight.y = y - dragOffset.y;
    this.drawDynamic();
}

// mouseup:
if (isDragging === 'freeweight' && draggedFreeWeight) {
    draggedFreeWeight.isDragging = false;
    // ...–ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–æ–Ω...
    draggedFreeWeight = null;  // –û—á–∏—â–∞–µ–º —Å—Å—ã–ª–∫—É
    isDragging = false;
}
```

---

## üìù –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–π –ö–æ–¥

### –§–∞–π–ª: `experiment-1-spring.js`

#### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (—Å—Ç—Ä–æ–∫–∞ ~2922):

```javascript
// –î–æ:
let isDragging = false;
let dragOffset = { x: 0, y: 0 };

// –ü–æ—Å–ª–µ:
let isDragging = false;
let dragOffset = { x: 0, y: 0 };
let draggedFreeWeight = null; // üÜï –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º—ã–π –≥—Ä—É–∑
```

#### 2. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ mousedown (—Å—Ç—Ä–æ–∫–∞ ~3120):

```javascript
// –î–æ:
if (freeWeight) {
    isDragging = 'freeweight';
    isDragging.freeWeightRef = freeWeight; // ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!
    // ...
}

// –ü–æ—Å–ª–µ:
if (freeWeight) {
    isDragging = 'freeweight';
    draggedFreeWeight = freeWeight; // ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç!
    // ...
}
```

#### 3. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ handlePointerMove (—Å—Ç—Ä–æ–∫–∞ ~2968):

```javascript
// –î–æ:
if (isDragging === 'freeweight' && isDragging.freeWeightRef) {
    const freeWeight = isDragging.freeWeightRef;
    freeWeight.x = x - dragOffset.x;
    // ...
}

// –ü–æ—Å–ª–µ:
if (isDragging === 'freeweight' && draggedFreeWeight) {
    draggedFreeWeight.x = x - dragOffset.x;
    draggedFreeWeight.y = y - dragOffset.y;
    this.drawDynamic();
    return;
}
```

#### 4. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ handlePointerUp (—Å—Ç—Ä–æ–∫–∞ ~3014):

```javascript
// –î–æ:
if (isDragging === 'freeweight' && isDragging.freeWeightRef) {
    const freeWeight = isDragging.freeWeightRef;
    // ...–æ–±—Ä–∞–±–æ—Ç–∫–∞...
}

// –ü–æ—Å–ª–µ:
if (isDragging === 'freeweight' && draggedFreeWeight) {
    draggedFreeWeight.isDragging = false;
    
    // ...–ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–æ–Ω –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏—è...
    
    draggedFreeWeight = null; // üîß –û—á–∏—â–∞–µ–º —Å—Å—ã–ª–∫—É
    isDragging = false;
}
```

---

## üéì –£—Ä–æ–∫ –Ω–∞ –ë—É–¥—É—â–µ–µ

### –ü—Ä–æ–±–ª–µ–º–∞:
JavaScript **–ø–æ–∑–≤–æ–ª—è–µ—Ç** –ø—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞ –ø—Ä–∏–º–∏—Ç–∏–≤–∞–º, –Ω–æ –æ–Ω–∏ **–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è**:

```javascript
let num = 42;
num.property = "test";
console.log(num.property);  // undefined

let str = "hello";
str.property = "world";
console.log(str.property);  // undefined

let bool = true;
bool.property = "value";
console.log(bool.property);  // undefined
```

**–¢–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç—ã –º–æ–≥—É—Ç –∏–º–µ—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞!**

```javascript
let obj = { value: 42 };
obj.property = "test";
console.log(obj.property);  // "test" ‚úÖ
```

### –†–µ—à–µ–Ω–∏–µ:
1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç** –≤–º–µ—Å—Ç–æ –ø—Ä–∏–º–∏—Ç–∏–≤–∞:
   ```javascript
   let isDragging = { type: false, target: null };
   isDragging.type = 'freeweight';
   isDragging.target = freeWeight;
   ```

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** (–ø—Ä–æ—â–µ –∏ –ø–æ–Ω—è—Ç–Ω–µ–µ):
   ```javascript
   let dragType = false;
   let dragTarget = null;
   ```

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Map/WeakMap** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö:
   ```javascript
   let dragData = new Map();
   dragData.set('type', 'freeweight');
   dragData.set('target', freeWeight);
   ```

**–í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ** –≤—ã–±—Ä–∞–Ω –≤–∞—Ä–∏–∞–Ω—Ç #2 ‚Äî —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ —á–∏—Ç–∞–µ–º—ã–π.

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –ë–∞–∑–æ–≤–æ–µ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
```
1. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –≥—Ä—É–∑ –Ω–∞ canvas (–¥–∞–ª–µ–∫–æ –æ—Ç –ø—Ä—É–∂–∏–Ω—ã)
2. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –≥—Ä—É–∑
3. –¢–∞—â–∏—Ç–µ –º—ã—à—å—é
4. ‚úÖ –û–∂–∏–¥–∞–Ω–∏–µ: –≥—Ä—É–∑ –°–õ–ï–î–£–ï–¢ –∑–∞ –∫—É—Ä—Å–æ—Ä–æ–º
```

### –¢–µ—Å—Ç 2: –û—Ç–ø—É—Å–∫–∞–Ω–∏–µ –≤ —Å–≤–æ–±–æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
```
1. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –≥—Ä—É–∑
2. –û—Ç–ø—É—Å—Ç–∏—Ç–µ –≤ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–º –º–µ—Å—Ç–µ
3. ‚úÖ –û–∂–∏–¥–∞–Ω–∏–µ: –≥—Ä—É–∑ –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ –Ω–æ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏
4. ‚úÖ –û–∂–∏–¥–∞–Ω–∏–µ: –º–æ–∂–Ω–æ —Å–Ω–æ–≤–∞ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç—å
```

### –¢–µ—Å—Ç 3: –ü–æ–¥–≤–µ—à–∏–≤–∞–Ω–∏–µ
```
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä—É–∂–∏–Ω—É
2. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –≥—Ä—É–∑ –Ω–∞ canvas
3. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –≥—Ä—É–∑ –∫ –ø—Ä—É–∂–∏–Ω–µ
4. ‚úÖ –û–∂–∏–¥–∞–Ω–∏–µ: –≥—Ä—É–∑ –ø–æ–¥–≤–µ—à–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ distance < 60px
```

### –¢–µ—Å—Ç 4: –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
```
–û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12), –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –≥—Ä—É–∑:

‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
[FREE-WEIGHTS] Started dragging: free-1729336252000
(–≥—Ä—É–∑ –¥–≤–∏–≥–∞–µ—Ç—Å—è)

‚ùå –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
Uncaught TypeError: Cannot read property 'x' of undefined
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ |
|---------|-----|-------|
| –ü–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è | 2 | 3 (+1) |
| –ü—Ä–æ–≤–µ—Ä–æ–∫ –≤ mousedown | 1 –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è | 1 –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è |
| –ü—Ä–æ–≤–µ—Ä–æ–∫ –≤ mousemove | 1 –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è | 1 –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è |
| –ü—Ä–æ–≤–µ—Ä–æ–∫ –≤ mouseup | 1 –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è | 1 –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è |
| **–†–∞–±–æ—Ç–∞–µ—Ç –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ** | ‚ùå –ù–ï–¢ | ‚úÖ –î–ê |

---

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–ì—Ä—É–∑—ã —Ç–µ–ø–µ—Ä—å –î–í–ò–ì–ê–Æ–¢–°–Ø!**  
‚úÖ –ü–ª–∞–≤–Ω–æ–µ —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∑–∞ –∫—É—Ä—Å–æ—Ä–æ–º  
‚úÖ –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–∏–Ω–∏–º –≤–æ –≤—Ä–µ–º—è drag  
‚úÖ –ö—É—Ä—Å–æ—Ä grab ‚Üí grabbing  
‚úÖ –í—Å–µ –∑–æ–Ω—ã –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç  

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –£–°–¢–†–ê–ù–ï–ù–ê! üéâ**

---

## üìù –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π –°–ø–∏—Å–æ–∫

–ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- [x] –ì—Ä—É–∑—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (—Ä–µ–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- [x] –ö—É—Ä—Å–æ—Ä –º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ (grab)
- [x] –ì—Ä—É–∑—ã –¥–≤–∏–≥–∞—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏
- [x] –ì—Ä—É–∑—ã –ø–æ–¥–≤–µ—à–∏–≤–∞—é—Ç—Å—è –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –∫ –ø—Ä—É–∂–∏–Ω–µ
- [x] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- [x] –ö–æ–¥ —á–∏—Ç–∞–µ–º—ã–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π

**–°—Ç–∞—Ç—É—Å: –í–°–Å –†–ê–ë–û–¢–ê–ï–¢! ‚úÖ**
